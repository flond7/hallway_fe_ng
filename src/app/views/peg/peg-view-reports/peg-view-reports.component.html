<app-peg-menu></app-peg-menu>

<div class="container">
  <div class="row w-100">
    <div class="col-12">

      <div class="row mt-3 border-bottom border-primary-peg">
        <div class="col-3 h6 mb-0 py-2" [ngClass]="{'bg-primary-peg text-dark' : tab.reportPerson === true}"
          (click)="selectTab('reportPerson')">Report Persona</div>
        <div class="col-3 h6 mb-0 py-2" [ngClass]="{'bg-primary-peg text-dark' : tab.reportManager === true}"
          (click)="selectTab('reportManager')">Report P.O.</div>
        <div class="col-3 h6 mb-0 py-2" [ngClass]="{'bg-primary-peg text-dark' : tab.reportOffice === true}"
          (click)="selectTab('reportOffice')">Report Ufficio</div>
        <div class="col-3 h6 mb-0 py-2" [ngClass]="{'bg-primary-peg text-dark' : tab.reportPa === true}"
          (click)="selectTab('reportPa')">Report Ente</div>
      </div>

      <div *ngIf="tab.reportPerson === true" class="tab">
        <div class="row mt-3">
          <app-peg-search-for-reports [tab]="tab" (goalListPerson)="getlist($event)" (selectedUserOutput)="this.selectedUser = $event"></app-peg-search-for-reports>
        </div>

        <div class="row">
          <div class="col-8">
  
            <div class="row">
  
              <div class="col-12">
                <h2 class="border-bottom border-primary-peg">Obbiettivi straordinari</h2>
                <div class="d-flex">
                  <p class="col-7 small">Nome</p>
                  <p class="col-3 small">Ufficio</p>
                  <p class="col-1 small">Peso</p>
                  <p class="col-1 small">% (31/12)</p>
                </div>
  
                <div *ngFor="let g of extraordinaryGoal"
                  class="d-flex border-bottom border-muted-peg h-2 align-content-center">
                  <div class="col-7">{{g.name}}</div>
                  <div class="col-3">{{g.office.name}}</div>
                  <div class="col-1">{{g.weight}}</div>
                  <div class="col-1">{{g.percent_3112}}</div>
                </div>
  
                <div class="d-flex">
                  <p class="col-7 small"></p>
                  <p class="col-3 small"></p>
                  <p class="col-1 small">{{this.extraordinaryTotal}}</p>
                  <p class="col-1 small">{{this.extraordinarySuccess}}</p>
                </div>
  
              </div>
  
            </div>
  
            <div class="row mt-5">
  
              <div class="col-12">
                <h2 class="border-bottom border-primary-peg">Obbiettivi ordinari</h2>
                <div class="d-flex">
                  <p class="col-7 small">Nome</p>
                  <p class="col-3 small">Ufficio</p>
                  <p class="col-1 small">Peso</p>
                  <p class="col-1 small">% (31/12)</p>
                </div>
  
                <div *ngFor="let g of ordinaryGoal" class="d-flex border-bottom border-muted-peg h-2 align-content-center">
                  <div class="col-7">{{g.name}}</div>
                  <div class="col-3">{{g.office.name}}</div>
                  <div class="col-1">{{g.weight}}</div>
                  <div class="col-1">{{g.percent_3112}}</div>
                </div>
  
                <div class="d-flex">
                  <p class="col-7 small"></p>
                  <p class="col-3 small"></p>
                  <p class="col-1 small">{{this.ordinaryTotal}}</p>
                  <p class="col-1 small">{{this.ordinarySuccess}}</p>
                </div>
  
              </div>
  
            </div>
  
  
          </div>
  
          <div class="col-4 pt-5">
            <canvas *ngIf="totalShowChart === true" baseChart [datasets]="totalChartData" [options]="doughnutChartOptions"
              [type]="'doughnut'"></canvas>
            <h1 class="text-center strong">{{this.totalPercent}} %</h1>
            <p class="text-center">{{this.totalWeight_3112}} / {{this.totalWeight}}</p>
          </div>
  
          <div class="row justify-content-end mt-2 ">
            <div class="w-auto btn bg-primary-aa mt-4" (click)="generatePdf()">Estrai PDF</div>
        </div>
  
        </div>

      </div>

    </div>


    <div *ngIf="tab.reportManager === true" class="tab">

      <div class="row mt-3">
        <app-peg-search-for-reports [tab]="tab" (goalListPerson)="getlist($event)" (selectedUserOutput)="this.selectedUser = $event"></app-peg-search-for-reports>
      </div>
      
      <div class="row">
        <div class="col-8">

          <div class="row">

            <div class="col-12">
              <h2 class="border-bottom border-primary-peg">Obbiettivi straordinari</h2>
              <div class="d-flex">
                <p class="col-7 small">Nome</p>
                <p class="col-3 small">Ufficio</p>
                <p class="col-1 small">Peso</p>
                <p class="col-1 small">% (31/12)</p>
              </div>

              <div *ngFor="let g of extraordinaryGoal"
                class="d-flex border-bottom border-muted-peg h-2 align-content-center">
                <div class="col-7">{{g.name}}</div>
                <div class="col-3">{{g.office.name}}</div>
                <div class="col-1">{{g.weight}}</div>
                <div class="col-1">{{g.percent_3112}}</div>
              </div>

              <div class="d-flex">
                <p class="col-7 small"></p>
                <p class="col-3 small"></p>
                <p class="col-1 small">{{this.extraordinaryTotal}}</p>
                <p class="col-1 small">{{this.extraordinarySuccess}}</p>
              </div>

            </div>

          </div>

          <div class="row mt-5">

            <div class="col-12">
              <h2 class="border-bottom border-primary-peg">Obbiettivi ordinari</h2>
              <div class="d-flex">
                <p class="col-7 small">Nome</p>
                <p class="col-3 small">Ufficio</p>
                <p class="col-1 small">Peso</p>
                <p class="col-1 small">% (31/12)</p>
              </div>

              <div *ngFor="let g of ordinaryGoal" class="d-flex border-bottom border-muted-peg h-2 align-content-center">
                <div class="col-7">{{g.name}}</div>
                <div class="col-3">{{g.office.name}}</div>
                <div class="col-1">{{g.weight}}</div>
                <div class="col-1">{{g.percent_3112}}</div>
              </div>

              <div class="d-flex">
                <p class="col-7 small"></p>
                <p class="col-3 small"></p>
                <p class="col-1 small">{{this.ordinaryTotal}}</p>
                <p class="col-1 small">{{this.ordinarySuccess}}</p>
              </div>

            </div>

          </div>


        </div>

        <div class="col-4 pt-5">
          <canvas *ngIf="totalShowChart === true" baseChart [datasets]="totalChartData" [options]="doughnutChartOptions"
            [type]="'doughnut'"></canvas>
          <h1 class="text-center strong">{{this.totalPercent}} %</h1>
          <p class="text-center">{{this.totalWeight_3112}} / {{this.totalWeight}}</p>
        </div>

        <div *ngIf="totalShowChart === true" class="row justify-content-end mt-2 ">
          <div class="w-auto btn bg-primary-peg mt-4" (click)="generatePdf()">Estrai PDF</div>
      </div>

      </div>

    </div>

    <div *ngIf="tab.reportOffice === true" class="tab">

    </div>

    <div *ngIf="tab.reportPa === true" class="tab">

    </div>

  </div>
</div>
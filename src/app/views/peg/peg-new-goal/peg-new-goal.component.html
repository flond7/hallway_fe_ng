<app-peg-menu></app-peg-menu>

<div class="container">
  <div class="row w-100">
    <div class="col-12">

      <form [formGroup]="goalForm" (ngSubmit)="submit()" class="">

        <div class="row m-0">
          <h2 class="border-bottom border-primary-peg">Obbiettivi straordinario</h2>
        </div>

        <div class="row border-bottom-muted">

          <div class="col-11 border-right">
            <div class="row m-0">
              <div class="col-4">
                <p class="mb-0 pb-0">Nome</p>
                <input formControlName="name" id="name" type="text" class="form-control">
              </div>
    
              <div class="col-4">
                <p class="mb-0 pb-0">Ufficio</p>
                <div class="d-flex justify-content-between">
                  <span>{{goal.office}}</span>
                  <div class="btn btn border-primary-peg text-primary-peg" (click)="changeOffice()"><fa-icon [icon]='faPen' class="icon-bg m-0"></fa-icon></div>
                </div>
                <!-- <input formControlName="name" id="name" type="text" class="form-control"> -->
              </div>
    
              <div class="col-4">
                <p class="mb-0 pb-0">Responsabile</p>
                <div class="d-flex justify-content-between">
                  <span>{{goal.responsable}}</span>
                  <div class="btn border-primary-peg text-primary-peg" (click)="ChangeResponsable()"><fa-icon [icon]='faPen' class="icon-bg m-0"></fa-icon></div>
                </div>
                <!-- <input formControlName="responsable" id="responsable" type="text" class="form-control"> -->
              </div>
          
            </div>
    
            <div class="row m-0">
    
              <div class="col-8">
                <p class="mb-0 pb-0">Descrizione</p>
                <textarea formControlName="description" id="description" type="textarea" rows="3" class="form-control"></textarea>
              </div>
    
              <div class="col-4">
                <p class="mb-0 pb-0">Persone</p>
                <div class="d-flex">{{goal.people}}</div>
                <div class="d-flex justify-content-between">
                  <input id="" type="text" class="w-100 form-control me-3" (focus)="focus()" (blur)="blur()" (input)="onSearchPAUser($event)">
                  <div class="btn border-primary-peg text-primary-peg" (click)="addInvolvedPeople()"><fa-icon [icon]='faSearch' class="icon-bg m-0"></fa-icon></div>

  
                </div>
              

                <div *ngIf="this.searching === true" [ngClass]="{'py-2': this.searching}"  class="search-results rounded px-3 mt-2">
                  <div *ngFor="let person of filteredPAUserList" class="d-flex justify-content-between align-items-center border-bottom border-muted py-1 mb-1">
                    <span class=""> {{person.name}} {{person.surname}}</span>
                    <div class="btn border-primary-peg text-primary-peg"><fa-icon [icon]='faPlus' class="m-0"></fa-icon></div>
                  </div>
                </div>
              </div>
    
    
            </div>
    
          </div>

          <div class="col-1">
            <p class="mb-0 pb-0">Peso</p>
            <input formControlName="weight" id="weight" type="number" class="form-control">
          </div>

        </div>

        
<!-- 
        <div class="row m-0 mt-3">
          <div class="col-8 justify-content-between">
            <div *ngFor="let person of this.userList; index as i" class="col-3 d-flex justify-content-between">
              <div class="">{{person.name}} {{person.surname}}</div>
              <div *ngIf="person?.added == false || person?.added == null"
                class="circle border border-primary-peg text-white cursor" (click)="addInvolvedPeople(person)">
                <small><fa-icon [icon]='faPlus' class=""></fa-icon></small></div>
              <div *ngIf="person?.added == true" class="circle bg-primary-peg cursor"
                (click)="removeInvolvedPeople(person)"><small><fa-icon [icon]='faMinus' class=""></fa-icon></small>
              </div>
            </div>
            <div class="d-flex">
              Persone coinvolte: <span *ngFor="let person of this.involved">{{person.name}} {{person.surname}}</span>
            </div>
          </div>
        </div>
 -->


        <div class="row justify-content-end">
          <button class="w-auto h-2 rounded border-0 bg-primary-peg mx-2" value="Submit" (click)="submit()">Salva</button>
        </div>

      </form>

    </div>
  </div>
</div>